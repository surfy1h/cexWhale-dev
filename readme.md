# go microservice practice - implement a digital currency trading platform based on go-zero. 

Online experience: Spend huge sums of money to build a machine http://47.113.223.16

The account password is here https://github.com/luxun9527/gex/blob/main/resource/users.txt

![](https://cdn.learnku.com/uploads/images/202403/24/51993/qySFFLK2ia.png!large)

## 基本功能

### 限价单
![](https://cdn.learnku.com/uploads/images/202406/10/51993/bZZs8Xnchx.gif)

### 市价单

![](https://cdn.learnku.com/uploads/images/202406/10/51993/vVNUSmI7Pp.gif)



## Run the project

The middleware the project depends on: message component pulsar, database mysql, redis, distributed transaction dtm, websocket push gpush.

1. Configure a host mapping, api.gex.com: project address

2. The project has been organized into docker-compose files. The dependencies and programs are in different docker-compose files. You can use docker-compose to start the project with one click. The docker version cannot be too old. The details are as follows.

```shell
root@ubuntu:~/smb# docker-compose -v
Docker Compose version v2.6.1

root@ubuntu:~/smb# docker version
Client: Docker Engine - Community
 Version:           24.0.6
 API version:       1.43
 Go version:        go1.20.7
 Git commit:        ed223bc
 Built:             Mon Sep  4 12:32:12 2023
 OS/Arch:           linux/amd64
 Context:           default
 
执行命令 
make build 编译项目。
make run 启动项目。
make clear 删除镜像和容器（会删除所有的容器和新建的镜像。）

账号lisi     密码lisilisi
 
```

3、直接访问启动项目机器的ip， 默认nginx配置的是的是80端口。



## go Practice

### go-zero api rpc basic usage

### dtm saga handles distributed transactions.

Scenario: Distributed transaction problem. To place an order, you need to insert a piece of data in the order service, and at the same time, you need to freeze the corresponding assets in the account service.

Solution: Use the saga mode of dtm to solve the problem of distributed transactions.

### etcd implements dynamic configuration parameters in the management background.

Scenario: Some configurations used by the service need to be dynamically configured and must take effect in a timely manner after being modified in the management background. Such as price accuracy and message of specific error code.

Solution: Use etcd's dynamic configuration.

### ast syntax tree self-made tool to generate error codes and improve the soft deletion of gorm gen

In some scenarios, such as when the code generated by the tool cannot meet our needs, or when we need to generate another piece of code based on one piece of code, we can use the ast syntax tree to make our own tools. 

### The error log is uploaded to our IM such as lark, tg, and enterprise WeChat.

Just add a new zap core and output the specified level of logs to our im for specific reference.

https://github.com/luxun9527/zaplog

### Docke deployment
Deploy using docker-compose

## v1.3.0

To be completed

1. Improve the front end.

2. k8s deployment.

3. Deploy a server.
